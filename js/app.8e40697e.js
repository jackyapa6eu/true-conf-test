(function(){"use strict";var e={480:function(e,t,n){var o=n(9242),l=n(3396),s=n(7139);const r={class:"main-content"},a={class:"elevators"},i={class:"floors"},v={class:"floor__sign"};function u(e,t,n,u,c,A){const d=(0,l.up)("ElevatorCab"),h=(0,l.up)("ElevatorCallButton");return(0,l.wg)(),(0,l.iD)(l.HY,null,[(0,l.wy)((0,l._)("input",{type:"range",min:"3",max:"10","onUpdate:modelValue":t[0]||(t[0]=e=>c.levelsCount=e),onChange:t[1]||(t[1]=(...e)=>A.handleSettingsChange&&A.handleSettingsChange(...e))},null,544),[[o.nr,c.levelsCount,void 0,{number:!0}]]),(0,l._)("span",null,"levels: "+(0,s.zw)(c.levelsCount),1),(0,l.wy)((0,l._)("input",{type:"range",min:"1",max:"5","onUpdate:modelValue":t[2]||(t[2]=e=>c.elevatorsCount=e),onChange:t[3]||(t[3]=(...e)=>A.handleSettingsChange&&A.handleSettingsChange(...e))},null,544),[[o.nr,c.elevatorsCount,void 0,{number:!0}]]),(0,l._)("span",null,"elevators: "+(0,s.zw)(c.elevatorsCount),1),(0,l._)("div",r,[(0,l._)("div",a,[((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(c.elevators,(e=>((0,l.wg)(),(0,l.j4)(d,{data:e,key:e.id,levelsCount:c.levels.length},null,8,["data","levelsCount"])))),128))]),(0,l._)("div",i,[((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(c.levels,((e,t)=>((0,l.wg)(),(0,l.iD)("div",{class:"floor",key:t,style:(0,s.j5)(A.floorStyles)},[(0,l._)("span",v,(0,s.zw)(t+1),1),(0,l.Wm)(h,{handleClick:()=>A.handleBtnClick(t),floor:e},null,8,["handleClick","floor"])],4)))),128))])])],64)}function c(e,t,n,o,r,a){return(0,l.wg)(),(0,l.iD)("button",{type:"button",class:(0,s.C_)(["floor__button",{floor__button_pressed:n.floor.pressed}]),onClick:t[0]||(t[0]=(...e)=>a.callElevator&&a.callElevator(...e))},null,2)}var A={name:"ElevatorCallButton",props:{handleClick:Function,floor:{pressed:Boolean,id:Number}},methods:{callElevator(){this.floor.pressed||this.handleClick()}}},d=n(89);const h=(0,d.Z)(A,[["render",c],["__scopeId","data-v-1018da1c"]]);var f=h,p="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAYBAMAAAASWSDLAAAAA3NCSVQICAjb4U/gAAAACXBIWXMAAAC8AAAAvAHPHSQeAAAAGXRFWHRTb2Z0d2FyZQB3d3cuaW5rc2NhcGUub3Jnm+48GgAAACRQTFRF////AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAxyY+ZQAAAAt0Uk5TAAYhJD9/orG52OPFq5oYAAAAXUlEQVQYV2NgoBR4BMJYoi0Ms7cLQNiM1TsZuncXQjjiu3cwWO2GSDFW717MwLwaIiW+e5cBA1QKLMEAlYJIQKSgEhApmARYCiYBloJLgKTgEiAphAQDg1oSA1UAAOogJ5WHJgsfAAAAAElFTkSuQmCC";const g={class:"elevator-cab__panel"},C={key:1,class:"elevator-cab__destination"};function m(e,t,n,o,r,a){return(0,l.wg)(),(0,l.iD)("div",{class:(0,s.C_)(["elevator-cab",{"elevator-cab_up":n.data.up,"elevator-cab_down":n.data.down,"elevator-cab_rest":n.data.rest}]),style:(0,s.j5)(a.elevStyles)},[(0,l._)("div",g,[n.data.inMove?((0,l.wg)(),(0,l.iD)("img",{key:0,class:(0,s.C_)(["elevator-cab__direction",{"elevator-cab__direction_up":n.data.up}]),src:p,alt:"direction icon"},null,2)):(0,l.kq)("",!0),n.data.inMove?((0,l.wg)(),(0,l.iD)("span",C,(0,s.zw)(n.data.tasks[0]+1),1)):(0,l.kq)("",!0)])],6)}const _={speed:1,restTime:3};var b={name:"ElevatorCab",computed:{elevStyles:function(){return{height:100/this.levelsCount+"%",transform:`translateY(${-100*this.data.level}%)`,transition:`transform ${_.speed}s linear`}}},props:{data:{rest:Boolean,inMove:Boolean,ready:Boolean,level:Number,tasks:Array,up:Boolean,down:Boolean},levelsCount:Number}};const y=(0,d.Z)(b,[["render",m],["__scopeId","data-v-ed22ff2e"]]);var w=y,E={name:"App",components:{ElevatorCab:w,ElevatorCallButton:f},data(){return{elevators:[],levels:[],levelsCount:5,elevatorsCount:2}},mounted(){const e=JSON.parse(localStorage.getItem("elevators")),t=JSON.parse(localStorage.getItem("levels"));if(e&&t){this.elevators=e,this.levels=t,this.levelsCount=t.length,this.elevatorsCount=e.length;const n=this.elevators.filter((e=>e.rest));n.forEach((e=>this.finishRest(e,e.level)));const o=this.elevators.filter((e=>e.inMove));o.forEach((e=>this.moveElevator(e,e.tasks[0])))}else this.elevators=this.createElevators(this.elevatorsCount),this.levels=this.createLevels(this.levelsCount),this.saveAppCondition()},methods:{handleBtnClick(e){const t=this.findElevator(e);t&&(this.levels[e].pressed=!0,t.tasks.push(e),t.ready&&this.moveElevator(t,e))},handleSettingsChange(){this.levels=this.createLevels(this.levelsCount),this.elevators=this.createElevators(this.elevatorsCount),this.saveAppCondition()},findElevator(e){const t=this.elevators.filter((e=>e.ready));if(t.find((t=>t.level===e)))return!1;if(t.length>0)return this.findClosestFreeElevator(t,e);{const e=this.elevators.map((e=>{const t=e.tasks.slice(0);t.unshift(e.level);let n=0;if(0===t.length)return 0;for(let o=0;o<t.length-1;o++)n+=Math.abs(t[o]-t[o+1]);return n}));return this.elevators[e.indexOf(Math.min(...e))]}},findClosestFreeElevator(e,t){const n={diff:Math.abs(e[0].level-t),index:0};for(let o=1;o<e.length;o++){const l=Math.abs(e[o].level-t);l<n.diff&&(n.diff=l,n.index=o)}return this.elevators.find((t=>e[n.index]===t))},moveElevator(e,t){e.ready=!1,e.inMove=!0,e.level===t?(e.inMove=!1,e.rest=!0,e.down=!1,e.up=!1,setTimeout((()=>{this.finishRest(e,t),this.saveAppCondition()}),1e3*_.restTime)):e.level<t?(e.level++,e.up=!0,setTimeout((()=>{this.moveElevator(e,t),this.saveAppCondition()}),1e3*_.speed)):e.level>t&&(e.level--,e.down=!0,setTimeout((()=>{this.moveElevator(e,t),this.saveAppCondition()}),1e3*_.speed)),this.saveAppCondition()},finishRest(e,t){e.rest=!1,e.ready=!0,e.tasks.shift(),this.levels[t].pressed=!1,e.tasks.length>0&&this.moveElevator(e,e.tasks[0]),this.saveAppCondition()},createElevators(e){const t=[];for(let n=0;n<e;n++)t.push({id:n,rest:!1,inMove:!1,ready:!0,level:0,tasks:[],down:!1,up:!1});return t},createLevels(e){const t=[];for(let n=0;n<e;n++)t.push({id:n,pressed:!1});return t},saveAppCondition(){localStorage.setItem("elevators",JSON.stringify(this.elevators)),localStorage.setItem("levels",JSON.stringify(this.levels))}},computed:{floorStyles:function(){return{height:100/this.levels.length+"%"}}}};const k=(0,d.Z)(E,[["render",u]]);var S=k;(0,o.ri)(S).mount("#app")}},t={};function n(o){var l=t[o];if(void 0!==l)return l.exports;var s=t[o]={exports:{}};return e[o](s,s.exports,n),s.exports}n.m=e,function(){var e=[];n.O=function(t,o,l,s){if(!o){var r=1/0;for(u=0;u<e.length;u++){o=e[u][0],l=e[u][1],s=e[u][2];for(var a=!0,i=0;i<o.length;i++)(!1&s||r>=s)&&Object.keys(n.O).every((function(e){return n.O[e](o[i])}))?o.splice(i--,1):(a=!1,s<r&&(r=s));if(a){e.splice(u--,1);var v=l();void 0!==v&&(t=v)}}return t}s=s||0;for(var u=e.length;u>0&&e[u-1][2]>s;u--)e[u]=e[u-1];e[u]=[o,l,s]}}(),function(){n.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return n.d(t,{a:t}),t}}(),function(){n.d=function(e,t){for(var o in t)n.o(t,o)&&!n.o(e,o)&&Object.defineProperty(e,o,{enumerable:!0,get:t[o]})}}(),function(){n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){var e={143:0};n.O.j=function(t){return 0===e[t]};var t=function(t,o){var l,s,r=o[0],a=o[1],i=o[2],v=0;if(r.some((function(t){return 0!==e[t]}))){for(l in a)n.o(a,l)&&(n.m[l]=a[l]);if(i)var u=i(n)}for(t&&t(o);v<r.length;v++)s=r[v],n.o(e,s)&&e[s]&&e[s][0](),e[s]=0;return n.O(u)},o=self["webpackChunktrue_conf_test"]=self["webpackChunktrue_conf_test"]||[];o.forEach(t.bind(null,0)),o.push=t.bind(null,o.push.bind(o))}();var o=n.O(void 0,[998],(function(){return n(480)}));o=n.O(o)})();
//# sourceMappingURL=app.8e40697e.js.map