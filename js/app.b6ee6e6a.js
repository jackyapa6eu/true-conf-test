(function(){"use strict";var e={3373:function(e,t,n){var o=n(9242),l=n(3396),s=n(7139);const a={class:"main-content"},r={class:"control-panel"},i={class:"control-panel__item"},v={class:"control-panel__item"},u={class:"building"},c={class:"elevators"},d={class:"floors"},A={class:"floor__sign"};function h(e,t,n,h,f,p){const g=(0,l.up)("ElevatorCab"),C=(0,l.up)("ElevatorCallButton");return(0,l.wg)(),(0,l.iD)("div",a,[(0,l._)("div",r,[(0,l._)("label",i,[(0,l.Uk)(" levels: "+(0,s.zw)(f.levelsCount)+" ",1),(0,l.wy)((0,l._)("input",{type:"range",min:"3",max:"10","onUpdate:modelValue":t[0]||(t[0]=e=>f.levelsCount=e),onChange:t[1]||(t[1]=(...e)=>p.handleSettingsChange&&p.handleSettingsChange(...e))},null,544),[[o.nr,f.levelsCount,void 0,{number:!0}]])]),(0,l._)("label",v,[(0,l.Uk)(" elevators: "+(0,s.zw)(f.elevatorsCount)+" ",1),(0,l.wy)((0,l._)("input",{type:"range",min:"1",max:"5","onUpdate:modelValue":t[2]||(t[2]=e=>f.elevatorsCount=e),onChange:t[3]||(t[3]=(...e)=>p.handleSettingsChange&&p.handleSettingsChange(...e))},null,544),[[o.nr,f.elevatorsCount,void 0,{number:!0}]])])]),(0,l._)("div",u,[(0,l._)("div",c,[((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(f.elevators,(e=>((0,l.wg)(),(0,l.j4)(g,{data:e,key:e.id,levelsCount:f.levels.length},null,8,["data","levelsCount"])))),128))]),(0,l._)("div",d,[((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(f.levels,((e,t)=>((0,l.wg)(),(0,l.iD)("div",{class:"floor",key:t,style:(0,s.j5)(p.floorStyles)},[(0,l._)("span",A,(0,s.zw)(t+1),1),(0,l.Wm)(C,{handleClick:()=>p.handleBtnClick(t),floor:e},null,8,["handleClick","floor"])],4)))),128))])])])}function f(e,t,n,o,a,r){return(0,l.wg)(),(0,l.iD)("button",{type:"button",class:(0,s.C_)(["floor__button",{floor__button_pressed:n.floor.pressed}]),onClick:t[0]||(t[0]=(...e)=>r.callElevator&&r.callElevator(...e))},null,2)}var p={name:"ElevatorCallButton",props:{handleClick:Function,floor:{pressed:Boolean,id:Number}},methods:{callElevator(){this.floor.pressed||this.handleClick()}}},g=n(89);const C=(0,g.Z)(p,[["render",f],["__scopeId","data-v-1018da1c"]]);var m=C,_="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAYBAMAAAASWSDLAAAAA3NCSVQICAjb4U/gAAAACXBIWXMAAAC8AAAAvAHPHSQeAAAAGXRFWHRTb2Z0d2FyZQB3d3cuaW5rc2NhcGUub3Jnm+48GgAAACRQTFRF////AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAxyY+ZQAAAAt0Uk5TAAYhJD9/orG52OPFq5oYAAAAXUlEQVQYV2NgoBR4BMJYoi0Ms7cLQNiM1TsZuncXQjjiu3cwWO2GSDFW717MwLwaIiW+e5cBA1QKLMEAlYJIQKSgEhApmARYCiYBloJLgKTgEiAphAQDg1oSA1UAAOogJ5WHJgsfAAAAAElFTkSuQmCC";const b={class:"elevator-cab__panel"},y={key:1,class:"elevator-cab__destination"};function w(e,t,n,o,a,r){return(0,l.wg)(),(0,l.iD)("div",{class:(0,s.C_)(["elevator-cab",{"elevator-cab_up":n.data.up,"elevator-cab_down":n.data.down,"elevator-cab_rest":n.data.rest}]),style:(0,s.j5)(r.elevStyles)},[(0,l._)("div",b,[n.data.inMove?((0,l.wg)(),(0,l.iD)("img",{key:0,class:(0,s.C_)(["elevator-cab__direction",{"elevator-cab__direction_up":n.data.up}]),src:_,alt:"direction icon"},null,2)):(0,l.kq)("",!0),n.data.inMove?((0,l.wg)(),(0,l.iD)("span",y,(0,s.zw)(n.data.tasks[0]+1),1)):(0,l.kq)("",!0)])],6)}const k={speed:1,restTime:3};var E={name:"ElevatorCab",computed:{elevStyles:function(){return{height:100/this.levelsCount+"%",transform:`translateY(${-100*this.data.level}%)`,transition:`transform ${k.speed}s linear`}}},props:{data:{rest:Boolean,inMove:Boolean,ready:Boolean,level:Number,tasks:Array,up:Boolean,down:Boolean},levelsCount:Number}};const S=(0,g.Z)(E,[["render",w],["__scopeId","data-v-ed22ff2e"]]);var B=S,O={name:"App",components:{ElevatorCab:B,ElevatorCallButton:m},data(){return{elevators:[],levels:[],levelsCount:5,elevatorsCount:2}},mounted(){const e=JSON.parse(localStorage.getItem("elevators")),t=JSON.parse(localStorage.getItem("levels"));if(e&&t){this.elevators=e,this.levels=t,this.levelsCount=t.length,this.elevatorsCount=e.length;const n=this.elevators.filter((e=>e.rest));n.forEach((e=>this.finishRest(e,e.level)));const o=this.elevators.filter((e=>e.inMove));o.forEach((e=>this.moveElevator(e,e.tasks[0])))}else this.elevators=this.createElevators(this.elevatorsCount),this.levels=this.createLevels(this.levelsCount),this.saveAppCondition()},methods:{handleBtnClick(e){const t=this.findElevator(e);t&&(this.levels[e].pressed=!0,t.tasks.push(e),t.ready&&this.moveElevator(t,e))},handleSettingsChange(){this.levels=this.createLevels(this.levelsCount),this.elevators=this.createElevators(this.elevatorsCount),this.saveAppCondition()},findElevator(e){const t=this.elevators.filter((e=>e.ready));if(t.find((t=>t.level===e)))return!1;if(t.length>0)return this.findClosestFreeElevator(t,e);{const e=this.elevators.map((e=>{const t=e.tasks.slice(0);t.unshift(e.level);let n=0;if(0===t.length)return 0;for(let o=0;o<t.length-1;o++)n+=Math.abs(t[o]-t[o+1]);return n}));return this.elevators[e.indexOf(Math.min(...e))]}},findClosestFreeElevator(e,t){const n={diff:Math.abs(e[0].level-t),index:0};for(let o=1;o<e.length;o++){const l=Math.abs(e[o].level-t);l<n.diff&&(n.diff=l,n.index=o)}return this.elevators.find((t=>e[n.index]===t))},moveElevator(e,t){e.ready=!1,e.inMove=!0,e.level===t?(e.inMove=!1,e.rest=!0,e.down=!1,e.up=!1,setTimeout((()=>{this.finishRest(e,t),this.saveAppCondition()}),1e3*k.restTime)):e.level<t?(e.level++,e.up=!0,setTimeout((()=>{this.moveElevator(e,t),this.saveAppCondition()}),1e3*k.speed)):e.level>t&&(e.level--,e.down=!0,setTimeout((()=>{this.moveElevator(e,t),this.saveAppCondition()}),1e3*k.speed)),this.saveAppCondition()},finishRest(e,t){e.rest=!1,e.ready=!0,e.tasks.shift(),this.levels[t].pressed=!1,e.tasks.length>0&&this.moveElevator(e,e.tasks[0]),this.saveAppCondition()},createElevators(e){const t=[];for(let n=0;n<e;n++)t.push({id:n,rest:!1,inMove:!1,ready:!0,level:0,tasks:[],down:!1,up:!1});return t},createLevels(e){const t=[];for(let n=0;n<e;n++)t.push({id:n,pressed:!1});return t},saveAppCondition(){localStorage.setItem("elevators",JSON.stringify(this.elevators)),localStorage.setItem("levels",JSON.stringify(this.levels))}},computed:{floorStyles:function(){return{height:100/this.levels.length+"%"}}}};const M=(0,g.Z)(O,[["render",h]]);var Q=M;(0,o.ri)(Q).mount("#app")}},t={};function n(o){var l=t[o];if(void 0!==l)return l.exports;var s=t[o]={exports:{}};return e[o](s,s.exports,n),s.exports}n.m=e,function(){var e=[];n.O=function(t,o,l,s){if(!o){var a=1/0;for(u=0;u<e.length;u++){o=e[u][0],l=e[u][1],s=e[u][2];for(var r=!0,i=0;i<o.length;i++)(!1&s||a>=s)&&Object.keys(n.O).every((function(e){return n.O[e](o[i])}))?o.splice(i--,1):(r=!1,s<a&&(a=s));if(r){e.splice(u--,1);var v=l();void 0!==v&&(t=v)}}return t}s=s||0;for(var u=e.length;u>0&&e[u-1][2]>s;u--)e[u]=e[u-1];e[u]=[o,l,s]}}(),function(){n.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return n.d(t,{a:t}),t}}(),function(){n.d=function(e,t){for(var o in t)n.o(t,o)&&!n.o(e,o)&&Object.defineProperty(e,o,{enumerable:!0,get:t[o]})}}(),function(){n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){var e={143:0};n.O.j=function(t){return 0===e[t]};var t=function(t,o){var l,s,a=o[0],r=o[1],i=o[2],v=0;if(a.some((function(t){return 0!==e[t]}))){for(l in r)n.o(r,l)&&(n.m[l]=r[l]);if(i)var u=i(n)}for(t&&t(o);v<a.length;v++)s=a[v],n.o(e,s)&&e[s]&&e[s][0](),e[s]=0;return n.O(u)},o=self["webpackChunktrue_conf_test"]=self["webpackChunktrue_conf_test"]||[];o.forEach(t.bind(null,0)),o.push=t.bind(null,o.push.bind(o))}();var o=n.O(void 0,[998],(function(){return n(3373)}));o=n.O(o)})();
//# sourceMappingURL=app.b6ee6e6a.js.map